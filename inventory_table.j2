<h2>Server Inventory Report (Generated by AAP)</h2>
<table>
  <tr>
    <th>Hostname</th><th>IP Address</th><th>Comment</th>
    <th>Kernel</th><th>OS Version</th><th>/ Size (GB)</th>
    <th>/var Size (GB)</th><th>/boot Size (GB)</th><th>Status</th>
  </tr>
  {% for host in groups[group_name] %}
  <tr>
    <td>{{ hostvars[host].ansible_hostname | default(host) }}</td>
    <td>{{ hostvars[host].ansible_default_ipv4.address | default('N/A') }}</td>
    <td>{{ hostvars[host].purpose | default('General') }}</td>
    <td>{{ hostvars[host].ansible_kernel | default('N/A') }}</td>
    <td>{{ hostvars[host].ansible_distribution | default('') }} {{ hostvars[host].ansible_distribution_version | default('') }}</td>
    <td>{{ (hostvars[host].ansible_facts.mounts
             | selectattr('mount','equalto','/')
             | map(attribute='size_total')
             | list | first | default(0)) | int / 1024 / 1024 / 1024 | round(1) }}</td>
    <td>{{ (hostvars[host].ansible_facts.mounts
             | selectattr('mount','equalto','/var')
             | map(attribute='size_total')
             | list | first | default(0)) | int / 1024 / 1024 / 1024 | round(1) }}</td>
    <td>{{ (hostvars[host].ansible_facts.mounts
             | selectattr('mount','equalto','/boot')
             | map(attribute='size_total')
             | list | first | default(0)) | int / 1024 / 1024 / 1024 | round(1) }}</td>
    <td>âœ… Live</td>
  </tr>
  {% endfor %}
</table>
<p>Last updated from AAP job at {{ '%Y-%m-%d %H:%M:%S' | strftime }}</p>